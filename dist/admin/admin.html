<!DOCTYPE html>
<html lang="th" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ANI-END</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.3/dragula.min.css">
    
    <style>
        body { font-family: 'Prompt', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
        
        .glass-panel { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .sidebar-item { transition: all 0.2s; border-left: 3px solid transparent; }
        .sidebar-item:hover, .sidebar-item.active { background: rgba(51, 65, 85, 0.5); border-left-color: #6366f1; color: white; }
        .sidebar-item.active i { color: #818cf8; }
        
        /* Loading Overlay */
        #global-loading { backdrop-filter: blur(4px); }
        
        /* Modal Animation */
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: all 0.2s ease-out; }
        .modal-exit { opacity: 1; transform: scale(1); }
        .modal-exit-active { opacity: 0; transform: scale(0.95); transition: all 0.15s ease-in; }

        /* Badge Pulse */
        @keyframes pulse-red { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }
        .badge-pulse { animation: pulse-red 2s infinite; }
    </style>
  <script type="module" crossorigin src="/ANI-END/assets/admin-YDMa-Lu8.js"></script>
  <link rel="modulepreload" crossorigin href="/ANI-END/assets/db-config-CDOV0zmd.js">
  <link rel="modulepreload" crossorigin href="/ANI-END/assets/tools-BcGrSTdy.js">
</head>
<body class="flex h-screen overflow-hidden text-sm">

    <aside class="w-64 bg-[#1e293b] border-r border-gray-800 flex flex-col flex-shrink-0 z-20">
        <div class="h-16 flex items-center px-6 border-b border-gray-800 bg-[#0f172a]">
            <i class="fas fa-shield-alt text-indigo-500 text-2xl mr-3"></i>
            <h1 class="text-xl font-bold tracking-wider text-white">ADMIN<span class="text-indigo-500">PANEL</span></h1>
        </div>

        <nav class="flex-1 overflow-y-auto py-4 space-y-1">
            <p class="px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Main Menu</p>
            <a href="#" onclick="switchTab('dashboard')" id="tab-dashboard" class="sidebar-item nav-item flex items-center px-6 py-3 text-gray-400 group active">
                <i class="fas fa-chart-line w-6 text-gray-500 group-hover:text-indigo-400 transition-colors"></i> Dashboard
            </a>
            <a href="#" onclick="switchTab('shows')" id="tab-shows" class="sidebar-item nav-item flex items-center px-6 py-3 text-gray-400 group">
                <i class="fas fa-film w-6 text-gray-500 group-hover:text-indigo-400 transition-colors"></i> จัดการอนิเมะ
            </a>
            <a href="#" onclick="switchTab('episodes')" id="tab-episodes" class="sidebar-item nav-item flex items-center px-6 py-3 text-gray-400 group">
                <i class="fas fa-list-ol w-6 text-gray-500 group-hover:text-indigo-400 transition-colors"></i> จัดการตอน
            </a>
            
            <p class="px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-6 mb-2">Settings</p>
            <a href="#" onclick="switchTab('banners')" id="tab-banners" class="sidebar-item nav-item flex items-center px-6 py-3 text-gray-400 group">
                <i class="fas fa-images w-6 text-gray-500 group-hover:text-indigo-400 transition-colors"></i> แบนเนอร์
            </a>
            <a href="#" onclick="switchTab('tags')" id="tab-tags" class="sidebar-item nav-item flex items-center px-6 py-3 text-gray-400 group">
                <i class="fas fa-tags w-6 text-gray-500 group-hover:text-indigo-400 transition-colors"></i> หมวดหมู่
            </a>
            <a href="#" onclick="switchTab('reports')" id="tab-reports" class="sidebar-item nav-item flex items-center px-6 py-3 text-gray-400 group justify-between">
                <div class="flex items-center"><i class="fas fa-exclamation-triangle w-6 text-gray-500 group-hover:text-indigo-400 transition-colors"></i> รายงานปัญหา</div>
                <span id="sidebar-report-badge" class="bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full hidden">0</span>
            </a>
        </nav>

        <div class="p-4 border-t border-gray-800 bg-[#0f172a]">
            <a href="../index.html" class="flex items-center px-4 py-2 text-gray-400 hover:text-white transition-colors rounded-lg hover:bg-gray-800 mb-2">
                <i class="fas fa-home w-6"></i> กลับหน้าบ้าน
            </a>
            <button id="btn-logout" class="w-full flex items-center px-4 py-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded-lg transition-colors">
                <i class="fas fa-sign-out-alt w-6"></i> ออกจากระบบ
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col overflow-hidden relative bg-[#0f172a]">
        
        <header class="h-16 flex items-center justify-between px-8 border-b border-gray-800 bg-[#1e293b]/50 backdrop-blur-md z-10">
            <h2 id="header-title" class="text-lg font-medium text-white">ภาพรวมระบบ</h2>
            <div class="flex items-center gap-4">
                <div class="text-right hidden sm:block">
                    <p class="text-sm font-bold text-white">Admin User</p>
                    <p class="text-xs text-gray-500">Super Administrator</p>
                </div>
                <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold shadow-lg">
                    A
                </div>
            </div>
        </header>

        <div class="flex-1 overflow-auto p-8 relative scroll-smooth" id="content-area">
            
            <div id="dashboard-panel" class="panel space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="glass-panel p-6 rounded-2xl flex items-center justify-between relative overflow-hidden group">
                        <div class="absolute right-0 top-0 w-32 h-32 bg-indigo-500/10 rounded-full blur-2xl transform translate-x-10 -translate-y-10 group-hover:bg-indigo-500/20 transition-all"></div>
                        <div>
                            <p class="text-gray-400 text-xs uppercase font-bold tracking-wider mb-1">อนิเมะทั้งหมด</p>
                            <h3 class="text-3xl font-bold text-white" id="stat-total-shows">...</h3>
                        </div>
                        <div class="w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center text-indigo-400">
                            <i class="fas fa-film text-xl"></i>
                        </div>
                    </div>
                    <div class="glass-panel p-6 rounded-2xl flex items-center justify-between relative overflow-hidden group">
                        <div class="absolute right-0 top-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-2xl transform translate-x-10 -translate-y-10 group-hover:bg-emerald-500/20 transition-all"></div>
                        <div>
                            <p class="text-gray-400 text-xs uppercase font-bold tracking-wider mb-1">ตอนทั้งหมด</p>
                            <h3 class="text-3xl font-bold text-white" id="stat-total-episodes">...</h3>
                        </div>
                        <div class="w-12 h-12 rounded-xl bg-emerald-500/20 flex items-center justify-center text-emerald-400">
                            <i class="fas fa-layer-group text-xl"></i>
                        </div>
                    </div>
                    <div class="glass-panel p-6 rounded-2xl flex items-center justify-between relative overflow-hidden group cursor-pointer hover:border-red-500/30 transition-all" onclick="switchTab('reports')">
                        <div class="absolute right-0 top-0 w-32 h-32 bg-red-500/10 rounded-full blur-2xl transform translate-x-10 -translate-y-10 group-hover:bg-red-500/20 transition-all"></div>
                        <div>
                            <p class="text-gray-400 text-xs uppercase font-bold tracking-wider mb-1">รายงานปัญหา</p>
                            <h3 class="text-3xl font-bold text-white flex items-center gap-2">
                                <span id="stat-total-reports">...</span>
                                <span id="dashboard-report-badge" class="hidden text-[10px] bg-red-500 text-white px-2 py-0.5 rounded-full animate-pulse">New!</span>
                            </h3>
                        </div>
                        <div class="w-12 h-12 rounded-xl bg-red-500/20 flex items-center justify-center text-red-400">
                            <i class="fas fa-bug text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2 glass-panel p-6 rounded-2xl">
                        <h3 class="text-lg font-bold text-white mb-4">สถิติการอัปเดต (7 วันล่าสุด)</h3>
                        <div class="h-64">
                            <canvas id="chart-episodes"></canvas>
                        </div>
                    </div>
                    
                    <div class="glass-panel p-6 rounded-2xl flex flex-col">
                        <h3 class="text-lg font-bold text-white mb-4">เคลื่อนไหวล่าสุด</h3>
                        <div id="recent-activity-list" class="flex-1 overflow-y-auto space-y-3 pr-2 custom-scrollbar-y">
                            </div>
                        
                        <div class="mt-4 pt-4 border-t border-gray-700">
                            <h4 class="text-xs font-bold text-gray-400 mb-2 uppercase">สัดส่วนหมวดหมู่</h4>
                            <div class="h-32 relative">
                                <canvas id="chart-tags"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="shows-panel" class="panel hidden space-y-6">
                <div class="flex justify-between items-center bg-[#1e293b] p-4 rounded-xl border border-gray-800">
                    <div class="flex gap-2">
                        <div class="relative">
                            <input type="text" id="search-show" placeholder="ค้นหาชื่อเรื่อง..." class="bg-gray-900 border border-gray-700 text-white text-sm rounded-lg block w-64 pl-10 p-2.5 focus:ring-indigo-500 focus:border-indigo-500">
                            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><i class="fas fa-search text-gray-500"></i></div>
                        </div>
                        <button id="btn-search-show" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 rounded-lg transition-colors"><i class="fas fa-arrow-right"></i></button>
                        <button id="btn-reset-show" class="bg-gray-700 hover:bg-gray-600 text-gray-300 px-4 rounded-lg transition-colors"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <button onclick="openShowModal()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg font-medium shadow-lg shadow-emerald-900/20 transition-all flex items-center gap-2">
                        <i class="fas fa-plus"></i> เพิ่มอนิเมะ
                    </button>
                </div>

                <div class="glass-panel rounded-xl overflow-hidden">
                    <table class="w-full text-left text-gray-400">
                        <thead class="text-xs text-gray-400 uppercase bg-gray-800/50">
                            <tr>
                                <th class="px-6 py-3 cursor-pointer hover:text-white" onclick="sortShows('title')">ชื่อเรื่อง <i class="fas fa-sort ml-1"></i></th>
                                <th class="px-6 py-3 text-center">ตอนล่าสุด</th>
                                <th class="px-6 py-3 text-center cursor-pointer hover:text-white" onclick="sortShows('viewCount')">ยอดวิว <i class="fas fa-sort ml-1"></i></th>
                                <th class="px-6 py-3 text-center cursor-pointer hover:text-white" onclick="sortShows('updatedAt')">อัปเดต <i class="fas fa-sort ml-1"></i></th>
                                <th class="px-6 py-3 text-right">จัดการ</th>
                            </tr>
                        </thead>
                        <tbody id="show-table-body" class="divide-y divide-gray-800"></tbody>
                    </table>
                    <div class="flex justify-between items-center px-6 py-3 bg-gray-800/30 border-t border-gray-800">
                        <span id="page-info-show" class="text-xs text-gray-500">หน้า 1</span>
                        <div class="flex gap-2">
                            <button id="prev-page-show" class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs disabled:opacity-50">ก่อนหน้า</button>
                            <button id="next-page-show" class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs disabled:opacity-50">ถัดไป</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="episodes-panel" class="panel hidden space-y-6">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-[#1e293b] p-4 rounded-xl border border-gray-800">
                    <div class="flex items-center gap-4 w-full md:w-auto">
                        <button id="btn-back-to-shows" onclick="switchTab('shows')" class="hidden text-gray-400 hover:text-white mr-2"><i class="fas fa-arrow-left"></i> กลับ</button>
                        <h2 id="episodes-header-title" class="text-lg font-bold text-white whitespace-nowrap">จัดการตอน</h2>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto">
                        <div class="relative w-full sm:w-64">
                            <select id="filter-episode-show" class="bg-gray-900 border border-gray-700 text-white text-sm rounded-lg block w-full p-2.5 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="">-- เลือกอนิเมะ --</option>
                            </select>
                        </div>
                        <button id="btn-load-episodes" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors">
                            <i class="fas fa-search"></i> ค้นหา
                        </button>
                        <div class="h-8 w-[1px] bg-gray-700 hidden sm:block"></div>
                        <button onclick="openEpisodeModal()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors shadow-lg">
                            <i class="fas fa-plus"></i> เพิ่มตอนเดียว
                        </button>
                        <button onclick="openBulkEpisodeModal()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors shadow-lg">
                            <i class="fas fa-layer-group"></i> เพิ่มหลายตอน
                        </button>
                    </div>
                </div>

                <div class="glass-panel rounded-xl overflow-hidden relative">
                    <div class="absolute top-3 right-4 z-10 flex gap-2">
                        <button id="btn-sort-episodes" class="text-gray-400 hover:text-white bg-gray-800 p-1.5 rounded text-xs" title="เรียงลำดับ">
                            <i class="fas fa-sort-numeric-down-alt"></i>
                        </button>
                    </div>

                    <table class="w-full text-left text-gray-400">
                        <thead class="text-xs text-gray-400 uppercase bg-gray-800/50">
                            <tr>
                                <th class="px-6 py-3">ตอนที่</th>
                                <th class="px-6 py-3">ชื่อตอน</th>
                                <th class="px-6 py-3">อัปเดตเมื่อ</th>
                                <th class="px-6 py-3 text-right">จัดการ</th>
                            </tr>
                        </thead>
                        <tbody id="episode-table-body" class="divide-y divide-gray-800">
                            <tr><td colspan="4" class="text-center py-10 text-gray-500">กรุณาเลือกอนิเมะเพื่อดูรายการตอน</td></tr>
                        </tbody>
                    </table>
                    
                    <div id="episode-pagination" class="flex justify-between items-center px-6 py-3 bg-gray-800/30 border-t border-gray-800 hidden">
                        <span id="page-info-ep" class="text-xs text-gray-500">หน้า 1</span>
                        <div class="flex gap-2">
                            <button id="prev-page-ep" class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs disabled:opacity-50">ก่อนหน้า</button>
                            <button id="next-page-ep" class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs disabled:opacity-50">ถัดไป</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="banners-panel" class="panel hidden space-y-6">
                <div class="flex justify-between items-center bg-[#1e293b] p-4 rounded-xl border border-gray-800">
                    <h3 class="text-lg font-bold text-white">จัดการแบนเนอร์</h3>
                    <button onclick="openBannerModal()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg font-medium shadow-lg transition-colors">
                        <i class="fas fa-plus"></i> เพิ่มแบนเนอร์
                    </button>
                </div>
                <div class="glass-panel rounded-xl overflow-hidden">
                    <table class="w-full text-left text-gray-400">
                        <thead class="text-xs text-gray-400 uppercase bg-gray-800/50">
                            <tr>
                                <th class="px-6 py-3">รูปภาพ</th>
                                <th class="px-6 py-3">หัวข้อ</th>
                                <th class="px-6 py-3">ลำดับ</th>
                                <th class="px-6 py-3 text-right">จัดการ</th>
                            </tr>
                        </thead>
                        <tbody id="banner-table-body" class="divide-y divide-gray-800"></tbody>
                    </table>
                    <p class="text-xs text-gray-500 p-4 text-center bg-gray-800/30"><i class="fas fa-info-circle"></i> ลากแล้ววางเพื่อจัดลำดับแบนเนอร์</p>
                </div>
            </div>

            <div id="tags-panel" class="panel hidden space-y-6">
                <div class="flex justify-between items-center bg-[#1e293b] p-4 rounded-xl border border-gray-800">
                    <h3 class="text-lg font-bold text-white">จัดการหมวดหมู่ (Tags)</h3>
                    <button onclick="openTagModal()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg font-medium shadow-lg transition-colors">
                        <i class="fas fa-plus"></i> เพิ่มหมวดหมู่
                    </button>
                </div>
                <div class="glass-panel rounded-xl overflow-hidden">
                    <table class="w-full text-left text-gray-400">
                        <thead class="text-xs text-gray-400 uppercase bg-gray-800/50">
                            <tr>
                                <th class="px-6 py-3">ชื่อหมวดหมู่</th>
                                <th class="px-6 py-3">Slug (อ้างอิง)</th>
                                <th class="px-6 py-3 text-right">จัดการ</th>
                            </tr>
                        </thead>
                        <tbody id="tag-table-body" class="divide-y divide-gray-800"></tbody>
                    </table>
                </div>
            </div>

            <div id="reports-panel" class="panel hidden space-y-6">
                <div class="flex justify-between items-center bg-[#1e293b] p-4 rounded-xl border border-gray-800">
                    <h3 class="text-lg font-bold text-white">รายงานปัญหาไฟล์เสีย</h3>
                    <button id="btn-refresh-reports" class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                        <i class="fas fa-sync-alt"></i> รีเฟรช
                    </button>
                </div>
                <div class="glass-panel rounded-xl overflow-hidden">
                    <table class="w-full text-left text-gray-400">
                        <thead class="text-xs text-gray-400 uppercase bg-gray-800/50">
                            <tr>
                                <th class="px-6 py-3">ชื่อเรื่อง</th>
                                <th class="px-6 py-3">ตอน/รายละเอียด</th>
                                <th class="px-6 py-3">สาเหตุ</th>
                                <th class="px-6 py-3">เวลาแจ้ง</th>
                                <th class="px-6 py-3 text-right">จัดการ</th>
                            </tr>
                        </thead>
                        <tbody id="report-table-body" class="divide-y divide-gray-800"></tbody>
                    </table>
                    <div class="flex justify-between items-center px-6 py-3 bg-gray-800/30 border-t border-gray-800">
                        <span id="page-info-report" class="text-xs text-gray-500">หน้า 1</span>
                        <div class="flex gap-2">
                            <button id="prev-page-report" class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs disabled:opacity-50">ก่อนหน้า</button>
                            <button id="next-page-report" class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs disabled:opacity-50">ถัดไป</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <div id="show-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden items-center justify-center p-4 modal-enter">
        <div class="bg-[#1e293b] w-full max-w-2xl rounded-2xl shadow-2xl border border-gray-700 flex flex-col max-h-[90vh]">
            <div class="p-6 border-b border-gray-700 flex justify-between items-center">
                <h3 class="text-xl font-bold text-white">จัดการข้อมูลอนิเมะ</h3>
                <button onclick="document.getElementById('show-modal').classList.add('hidden'); document.getElementById('show-modal').classList.remove('flex');" class="text-gray-400 hover:text-white"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="p-6 overflow-y-auto custom-scrollbar-y">
                <form id="show-form" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-1">ชื่อเรื่อง</label>
                            <input type="text" id="show-title" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white focus:ring-indigo-500 focus:border-indigo-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-1">รูปปก (URL)</label>
                            <input type="url" id="show-thumbnail" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white focus:ring-indigo-500 focus:border-indigo-500" required placeholder="https://...">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">เรื่องย่อ</label>
                        <textarea id="show-desc" rows="3" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">หมวดหมู่ (Tags)</label>
                        <div id="tags-checkbox-container" class="grid grid-cols-2 sm:grid-cols-3 gap-2 bg-gray-900 p-3 rounded-lg border border-gray-700 max-h-32 overflow-y-auto custom-scrollbar-y">
                            </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-1">ยอดวิวเริ่มต้น</label>
                            <input type="number" id="show-view-count" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white" value="0">
                        </div>
                        <div class="flex items-end">
                            <label class="flex items-center space-x-3 bg-gray-900 p-2.5 rounded-lg border border-gray-700 w-full cursor-pointer hover:bg-gray-800">
                                <input type="checkbox" id="show-completed" class="form-checkbox h-5 w-5 text-indigo-600 bg-gray-800 border-gray-600 rounded">
                                <span class="text-sm font-medium text-gray-300">ฉายจบแล้ว (Completed)</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="flex justify-end gap-3 pt-4 border-t border-gray-700">
                        <button type="button" onclick="document.getElementById('show-modal').classList.add('hidden'); document.getElementById('show-modal').classList.remove('flex');" class="px-5 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm">ยกเลิก</button>
                        <button type="submit" class="px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium shadow-lg">บันทึก</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="episode-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden items-center justify-center p-4 modal-enter">
        <div class="bg-[#1e293b] w-full max-w-lg rounded-2xl shadow-2xl border border-gray-700">
            <div class="p-6 border-b border-gray-700 flex justify-between items-center">
                <h3 class="text-xl font-bold text-white">จัดการตอน</h3>
                <button onclick="document.getElementById('episode-modal').classList.add('hidden'); document.getElementById('episode-modal').classList.remove('flex');" class="text-gray-400 hover:text-white"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="p-6">
                <form id="episode-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">เลือกอนิเมะ</label>
                        <select id="episode-show-select" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white"></select>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-1">ตอนที่ (ตัวเลข)</label>
                            <input type="number" id="episode-number" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-1">ชื่อตอน (Optional)</label>
                            <input type="text" id="episode-title" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">ลิงก์วิดีโอ (Embed URL)</label>
                        <input type="url" id="episode-url" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white font-mono text-xs" required placeholder="https://...">
                    </div>
                    <div class="flex justify-end gap-3 pt-4">
                        <button type="submit" class="w-full px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium shadow-lg">บันทึก</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="bulk-episode-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden items-center justify-center p-4 modal-enter">
        <div class="bg-[#1e293b] w-full max-w-2xl rounded-2xl shadow-2xl border border-gray-700">
            <div class="p-6 border-b border-gray-700 flex justify-between items-center">
                <h3 class="text-xl font-bold text-white"><i class="fas fa-layer-group mr-2 text-blue-500"></i> เพิ่มหลายตอนพร้อมกัน</h3>
                <button onclick="document.getElementById('bulk-episode-modal').classList.add('hidden'); document.getElementById('bulk-episode-modal').classList.remove('flex');" class="text-gray-400 hover:text-white"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="p-6 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">เลือกอนิเมะ</label>
                        <select id="bulk-episode-show-select" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white text-sm"></select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">เริ่มที่ตอน (ตัวเลข)</label>
                        <input type="number" id="bulk-start-ep" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white text-sm" value="1">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-400 mb-1">รายการลิงก์ (1 บรรทัด = 1 ตอน)</label>
                    <textarea id="bulk-urls" rows="8" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 text-white font-mono text-xs leading-relaxed focus:ring-blue-500 focus:border-blue-500" placeholder="https://video1.com/embed...&#10;https://video2.com/embed..."></textarea>
                    <p class="text-xs text-gray-500 mt-1">* ระบบจะไล่ลำดับตอนให้อัตโนมัติ เริ่มจากเลขที่ระบุ</p>
                </div>
                <div class="pt-2">
                    <button id="btn-submit-bulk" class="w-full px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-bold shadow-lg transition-colors">
                        ตรวจสอบและบันทึก
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="banner-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden items-center justify-center p-4 modal-enter">
        <div class="bg-[#1e293b] w-full max-w-lg rounded-2xl shadow-2xl border border-gray-700">
            <div class="p-6 border-b border-gray-700 flex justify-between items-center">
                <h3 class="text-xl font-bold text-white">จัดการแบนเนอร์</h3>
                <button onclick="document.getElementById('banner-modal').classList.add('hidden'); document.getElementById('banner-modal').classList.remove('flex');" class="text-gray-400 hover:text-white"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="p-6">
                <form id="banner-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">หัวข้อแบนเนอร์</label>
                        <input type="text" id="banner-title" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">รูปภาพ (URL 16:9)</label>
                        <input type="url" id="banner-image-url" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">ลิงก์ปลายทาง (เช่น player.html?id=...)</label>
                        <input type="text" id="banner-link-url" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-1">ลำดับการแสดง</label>
                            <input type="number" id="banner-order" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white">
                        </div>
                        <div class="flex items-end">
                            <label class="flex items-center space-x-3 bg-gray-900 p-2.5 rounded-lg border border-gray-700 w-full cursor-pointer hover:bg-gray-800">
                                <input type="checkbox" id="banner-active" class="form-checkbox h-5 w-5 text-indigo-600 bg-gray-800 border-gray-600 rounded" checked>
                                <span class="text-sm font-medium text-gray-300">เปิดใช้งาน</span>
                            </label>
                        </div>
                    </div>
                    <div class="flex justify-end gap-3 pt-4">
                        <button type="submit" class="w-full px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium shadow-lg">บันทึก</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="tag-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden items-center justify-center p-4 modal-enter">
        <div class="bg-[#1e293b] w-full max-w-sm rounded-2xl shadow-2xl border border-gray-700">
            <div class="p-6 border-b border-gray-700 flex justify-between items-center">
                <h3 id="tag-modal-title" class="text-xl font-bold text-white">เพิ่มหมวดหมู่</h3>
                <button onclick="document.getElementById('tag-modal').classList.add('hidden'); document.getElementById('tag-modal').classList.remove('flex');" class="text-gray-400 hover:text-white"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="p-6">
                <form id="tag-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">ชื่อหมวดหมู่</label>
                        <input type="text" id="tag-name" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white" required placeholder="เช่น Action, Drama">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">Slug (ภาษาอังกฤษ ตัวเล็ก)</label>
                        <input type="text" id="tag-slug" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-white" required placeholder="เช่น action, drama">
                    </div>
                    <div class="flex justify-end gap-3 pt-4">
                        <button type="submit" class="w-full px-5 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm font-medium shadow-lg">บันทึก</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="global-loading" class="fixed inset-0 bg-black/50 z-[60] hidden items-center justify-center flex-col">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mb-4"></div>
        <p id="loading-text" class="text-white font-medium animate-pulse">กำลังทำงาน...</p>
    </div>

    <div id="toast-container" class="fixed bottom-5 right-5 z-[70] space-y-2 pointer-events-none"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.3/dragula.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>
</html>
