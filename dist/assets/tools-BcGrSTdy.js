function u(t,e){let r;return function(...s){const i=this;clearTimeout(r),r=setTimeout(()=>t.apply(i,s),e)}}const c=new IntersectionObserver((t,e)=>{t.forEach(r=>{if(r.isIntersecting){const s=r.target,i=s.getAttribute("data-src");if(i){const o=new Image;o.src=i,o.onload=()=>{s.src=i,s.classList.remove("opacity-0","scale-95"),s.classList.add("opacity-100","scale-100");const a=s.closest(".image-wrapper");a&&a.classList.remove("animate-pulse"),s.removeAttribute("data-src")},o.onerror=()=>{s.src="https://placehold.co/400x600/333/fff?text=No+Img",s.classList.remove("opacity-0");const a=s.closest(".image-wrapper");a&&a.classList.remove("animate-pulse")}}e.unobserve(s)}})},{rootMargin:"100px",threshold:.01});function d(t=document){t.querySelectorAll("img[data-src]:not(.observed)").forEach(r=>{r.classList.add("observed"),c.observe(r)})}function l(t){return typeof t!="string"?t||"":t.normalize("NFC").replace(/\u0E4D\u0E32/g,"ำ").replace(/\u0E32\u0E4D/g,"ำ")}function f(t){if(!t)return[];const e=new Set,r=l(t).toLowerCase().trim();return r?(e.add(r),r.split(/\s+/).forEach(i=>{if(!i)return;e.add(i);let o="";const a=Math.min(i.length,20);for(let n=0;n<a;n++)o+=i[n],e.add(o)}),[...e]):[]}function m(t){if(!t)return"-";try{return(t.toDate?t.toDate():new Date(t)).toLocaleString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"-"}}function p(t){var s;if(!t||t==="undefined"||t==="null")return"";let e=t.trim();if(!e)return"";const r='class="absolute inset-0 w-full h-full border-0" allowfullscreen webkitallowfullscreen mozallowfullscreen allow="autoplay; encrypted-media; fullscreen; picture-in-picture"';if(e.toLowerCase().startsWith("<iframe"))return e.replace(/width\s*=\s*["'][^"']*["']/gi,"").replace(/height\s*=\s*["'][^"']*["']/gi,"").replace(/<iframe/i,`<iframe ${r}`);if(e.includes("youtube.com")||e.includes("youtu.be")){let i="";return e.includes("v=")?i=e.split("v=")[1].split("&")[0]:e.includes("youtu.be/")?i=e.split("youtu.be/")[1].split("?")[0]:e.includes("/embed/")&&(i=e.split("/embed/")[1].split("?")[0]),i?`<iframe src="https://www.youtube.com/embed/${i}?autoplay=1&rel=0" ${r}></iframe>`:""}return e.includes("ok.ru")?(e.startsWith("http")||(e="https:"+e),e.includes("/video/")&&(e=e.replace("/video/","/videoembed/")),`<iframe src="${e}" ${r}></iframe>`):e.includes("archive.org")?(e.includes("/details/")&&(e=e.replace("/details/","/embed/")),`<iframe src="${e}" ${r}></iframe>`):e.includes("dailymotion.com")?`<iframe src="https://www.dailymotion.com/embed/video/${(s=e.split("/video/")[1])==null?void 0:s.split("?")[0]}?autoplay=1" ${r}></iframe>`:e.includes("drive.google.com")?(e=e.replace("/view","/preview"),`<iframe src="${e}" ${r}></iframe>`):e.startsWith("http")||e.startsWith("//")?`<iframe src="${e}" ${r}></iframe>`:""}export{f as a,u as d,m as f,p as g,d as o};
