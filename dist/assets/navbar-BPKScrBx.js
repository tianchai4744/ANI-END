import{G as W,o as q,a as p,v as F,x as O,t as G,y as K,z as j,i as H,f as u,e as g,n as U,k as y,m as z,A as Y,q as B,l as _,d as b,g as I,p as $}from"./db-config-CDOV0zmd.js";const J=new W;function M(e){switch(e){case"auth/email-already-in-use":return"‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß";case"auth/wrong-password":return"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";case"auth/user-not-found":return"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ";case"auth/weak-password":return"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£";case"auth/invalid-email":return"‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";case"auth/popup-closed-by-user":return"‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";case"auth/too-many-requests":return"‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà";default:return"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: "+e}}async function k(e){var t;if(e)try{const s=H(u,`artifacts/${g}/users/${e.uid}`),n=await U(s),a={uid:e.uid,email:e.email,displayName:e.displayName||"User",photoURL:e.photoURL||`https://ui-avatars.com/api/?name=${e.email.charAt(0)}&background=random`,lastLoginAt:y(),authProvider:((t=e.providerData[0])==null?void 0:t.providerId)||"password"};n.exists()||(a.createdAt=y(),a.role="user"),await z(s,a,{merge:!0})}catch(s){console.error("Error saving user profile:",s)}}async function Q(){const e=await F(p,J);return await k(e.user),e.user}async function V(e,t,s){const n=await O(p,e,t);return await G(n.user,{displayName:s,photoURL:`https://ui-avatars.com/api/?name=${encodeURIComponent(s)}&background=random`}),await k(n.user),n.user}async function X(e,t){const s=await K(p,e,t);return await k(s.user),s.user}async function Z(e){await j(p,e)}async function ee(){await Y(p),window.location.reload()}function te(e){q(p,t=>{e&&e(t)})}const se={async getRandomShowId(){const e=B(b(u,`artifacts/${g}/public/data/shows`),_(20)),t=await I(e);if(t.empty)return null;const s=Math.floor(Math.random()*t.docs.length);return t.docs[s].id}};function ne(){const e=document.getElementById("btn-random-anime"),t=document.getElementById("btn-random-anime-mobile"),s=async n=>{n&&n.preventDefault();try{const a=await se.getRandomShowId();if(a){const i=window.location.pathname.includes("/pages/")?"":"pages/";window.location.href=`${i}player.html?id=${a}`}else window.showToast&&window.showToast("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞","error")}catch(a){console.error(a),window.showToast&&window.showToast("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°","error")}};e&&(e.onclick=s),t&&(t.onclick=s)}const N="ani_notif_read_ids",E={getReadState(){try{const e=localStorage.getItem(N);return e?JSON.parse(e):[]}catch{return[]}},saveReadState(e){localStorage.setItem(N,JSON.stringify(e))},markAsRead(e){let t=this.getReadState();t.includes(e)||(t.push(e),t.length>200&&t.shift(),this.saveReadState(t))},markAllAsRead(e){let t=this.getReadState();const s=new Set([...t,...e]),n=Array.from(s).slice(-200);this.saveReadState(n)},async fetchNotifications(e){const t=b(u,`artifacts/${g}/users/${e}/bookmarks`),s=await I(B(t,_(50)));if(s.empty)return{notifications:[],unreadCount:0};const n=b(u,`artifacts/${g}/users/${e}/viewHistory`),a=await I(B(n)),o=new Map;a.forEach(d=>o.set(d.data().showId,d.data().lastWatchedEpisodeNumber||0));const i=this.getReadState();let c=[];const v=s.docs.map(async d=>{var T;const h=d.id,R=await U(H(u,`artifacts/${g}/public/data/shows`,h));if(!R.exists())return null;const w=R.data(),x=w.latestEpisodeNumber||0,D=o.get(h)||0;if(x>D){const L=`${h}_ep${x}`,C=i.includes(L);return C||c.push(L),{title:w.title,ep:x,id:h,thumbnail:w.thumbnailUrl,notifId:L,isRead:C,timestamp:((T=w.lastUpdated)==null?void 0:T.toMillis())||Date.now()}}return null}),A=(await Promise.all(v)).filter(d=>d!==null);return A.sort((d,h)=>d.isRead===h.isRead?0:d.isRead?1:-1),{notifications:A,unreadCount:c.length,unreadIds:c}}},l={elements:{},init(){var e;this.elements={btn:document.getElementById("btn-notification"),badge:document.getElementById("notif-badge"),list:document.getElementById("notification-list"),dropdown:document.getElementById("notification-dropdown"),headerContainer:(e=document.getElementById("notification-dropdown"))==null?void 0:e.querySelector(".border-b")}},renderLoading(){this.elements.list&&(this.elements.list.innerHTML=`
                <div class="flex justify-center items-center py-8 text-gray-500">
                    <i class="ri-loader-4-line animate-spin text-2xl"></i>
                </div>`)},renderEmpty(){this.elements.list&&(this.elements.list.innerHTML=`
                <div class="flex flex-col items-center justify-center p-6 text-gray-500 opacity-70">
                    <i class="ri-notification-off-line text-4xl mb-2"></i>
                    <p class="text-xs">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà</p>
                </div>`)},renderError(){this.elements.list&&(this.elements.list.innerHTML='<p class="text-center text-red-400 text-xs p-4">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î</p>')},updateBadge(e){this.elements.badge&&(e>0?(this.elements.badge.textContent=e>99?"99+":e,this.elements.badge.classList.remove("hidden"),this.elements.badge.classList.add("animate-bounce"),setTimeout(()=>this.elements.badge.classList.remove("animate-bounce"),1e3)):this.elements.badge.classList.add("hidden"))},renderList(e,t){if(!this.elements.list)return;const n=window.location.pathname.includes("/pages/")?"":"pages/";let a="";e.forEach(o=>{const i=o.isRead?"opacity-50 grayscale bg-gray-900/50":"hover:bg-gray-700 bg-transparent",c=o.isRead?"text-gray-500":"text-green-400";a+=`
                <a href="${n}player.html?id=${o.id}" 
                   data-nid="${o.notifId}"
                   class="notif-item block p-3 border-b border-gray-700 last:border-0 flex gap-3 items-center transition-all ${i}">
                    <div class="relative flex-shrink-0">
                        <img src="${o.thumbnail}" class="w-12 h-16 object-cover rounded shadow-md bg-gray-700" onerror="this.src='https://placehold.co/40x60'">
                        ${o.isRead?"":'<span class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-gray-800"></span>'}
                    </div>
                    <div class="min-w-0 flex-1">
                        <div class="flex justify-between items-start">
                            <p class="text-xs font-bold ${c} status-text mb-0.5">‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${o.ep}</p>
                            ${o.isRead?"":'<span class="text-[10px] bg-red-500/20 text-red-400 px-1.5 rounded">NEW</span>'}
                        </div>
                        <p class="text-sm text-gray-200 truncate leading-tight">${o.title}</p>
                        <p class="text-[10px] text-gray-500 mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ï‡πà‡∏≠</p>
                    </div>
                </a>`}),this.elements.list.innerHTML=a,this.elements.list.querySelectorAll(".notif-item").forEach(o=>{o.addEventListener("click",function(){const i=this.getAttribute("data-nid");i&&t(i)})})},renderMarkAllButton(e,t){if(!this.elements.headerContainer)return;const s=document.getElementById("btn-mark-all-read");if(e&&!s){const n=document.createElement("button");n.id="btn-mark-all-read",n.className="text-xs text-green-400 hover:text-green-300 font-bold transition-colors",n.innerHTML='<i class="ri-check-double-line"></i> ‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',n.onclick=a=>{a.stopPropagation(),t(),n.remove()},this.elements.headerContainer.appendChild(n)}else!e&&s&&s.remove()},markAllItemsAsRead(){this.elements.list&&this.elements.list.querySelectorAll(".notif-item").forEach(e=>{e.classList.add("opacity-50","grayscale","bg-gray-900/50"),e.classList.remove("hover:bg-gray-700"),e.querySelector(".status-text").className="text-xs font-bold text-gray-500 status-text"})}};async function ae(e){if(l.init(),!!l.elements.btn){l.renderLoading();try{const{notifications:t,unreadCount:s,unreadIds:n}=await E.fetchNotifications(e);t.length>0?(l.updateBadge(s),l.renderMarkAllButton(s>0,()=>{E.markAllAsRead(n),l.markAllItemsAsRead(),l.updateBadge(0)}),l.renderList(t,i=>{E.markAsRead(i)})):(l.updateBadge(0),l.renderEmpty());const{btn:a,dropdown:o}=l.elements;a.onclick=i=>{i.stopPropagation(),o.classList.toggle("hidden")},document.addEventListener("click",i=>{o&&!o.contains(i.target)&&!a.contains(i.target)&&o.classList.add("hidden")})}catch(t){console.error("Notif Error:",t),l.renderError()}}}const f=new Set;function oe(){window.isLoggerInitialized||(window.isLoggerInitialized=!0,window.onerror=async function(e,t,s,n,a){if(e==="Script error.")return;const o=`${e}_${s}_${t}`;if(!f.has(o)){f.add(o),setTimeout(()=>f.delete(o),3e5),console.error("üö® ANI-END System Log:",e);try{await $(b(u,`artifacts/${g}/system_logs`),{type:"CRITICAL_ERROR",message:e,source:t||"unknown",line:s||0,stack:a?a.stack:"no-stack",userAgent:navigator.userAgent,timestamp:y(),url:window.location.href})}catch{console.warn("Logging failed (Offline or Permission denied)")}}},window.addEventListener("unhandledrejection",async e=>{const t=e.reason?e.reason.message||e.reason:"Unknown Promise Error";if(!f.has(t)){f.add(t),setTimeout(()=>f.delete(t),3e5);try{await $(b(u,`artifacts/${g}/system_logs`),{type:"UNHANDLED_PROMISE",message:t,timestamp:y(),url:window.location.href})}catch{}}}),console.log("‚úÖ Global Error Logging Initialized (Optimized)"))}const m={CACHE_KEY:"ani_navbar_v5_pro_full",getCache(){return localStorage.getItem(this.CACHE_KEY)},setCache(e){localStorage.setItem(this.CACHE_KEY,e)},clearCache(){localStorage.removeItem(this.CACHE_KEY)},getUserCache(){try{return JSON.parse(localStorage.getItem("ani_user_cache"))}catch{return null}},setUserCache(e){if(e){const t={name:e.displayName||e.email.split("@")[0],photo:e.photoURL||`https://ui-avatars.com/api/?name=${e.email}&background=random`};return localStorage.setItem("ani_user_cache",JSON.stringify(t)),t}else return localStorage.removeItem("ani_user_cache"),null},fixPaths(e,t){let s=e.replace(/href="([^"]*)"/g,(n,a)=>{if(a.startsWith("#")||a.startsWith("http")||a.startsWith("mailto"))return n;const o=a.startsWith("/")?a.substring(1):a;return`href="${t.endsWith("/")?t.slice(0,-1):t}/${o}"`});return s=s.replace(/src="([^"]*)"/g,(n,a)=>{if(a.startsWith("http")||a.startsWith("data:"))return n;const o=a.startsWith("/")?a.substring(1):a;return`src="${t.endsWith("/")?t.slice(0,-1):t}/${o}"`}),s},async fetchHTML(e){const t=await fetch(`${e}/components/navbar.html`);if(!t.ok)throw new Error("Failed to load navbar");return await t.text()}},r={placeholder:null,init(){this.placeholder=document.getElementById("navbar-placeholder")},renderHTML(e){this.placeholder&&(this.placeholder.innerHTML=e)},showToast(e,t="success"){const s=document.getElementById("toast-container");if(!s)return;const n=document.createElement("div");n.className=`pointer-events-auto flex items-center gap-3 w-full p-4 rounded-lg shadow-xl border-l-4 toast-enter transition-all ${t==="success"?"bg-gray-800 border-green-500 text-white":t==="error"?"bg-gray-800 border-red-500 text-white":"bg-gray-800 border-blue-500 text-white"}`;const a=t==="success"?"ri-checkbox-circle-fill text-green-500 text-xl":t==="error"?"ri-error-warning-fill text-red-500 text-xl":"ri-information-fill text-blue-500 text-xl";n.innerHTML=`<i class="${a}"></i><div class="text-sm font-medium">${e}</div>`,s.appendChild(n),setTimeout(()=>{n.classList.remove("toast-enter"),n.classList.add("toast-exit"),setTimeout(()=>n.remove(),300)},4e3)},updateAuthState(e){const t=(a,o)=>{const i=document.getElementById(a);i&&(o?i.classList.remove("hidden"):i.classList.add("hidden"))},s=(a,o)=>{const i=document.getElementById(a);i&&(i.src=o)},n=(a,o)=>{const i=document.getElementById(a);i&&(i.textContent=o)};e?(t("btn-login-google",!1),t("user-profile",!0),s("user-avatar",e.photo),n("user-name-dropdown",e.name),t("btn-login-google-mobile",!1),t("mobile-user-profile",!0),t("btn-logout-mobile",!0),s("mobile-user-avatar",e.photo),n("mobile-user-name",e.name)):(t("btn-login-google",!0),t("user-profile",!1),t("btn-login-google-mobile",!0),t("mobile-user-profile",!1),t("btn-logout-mobile",!1))},toggleAuthModal(e){const t=document.getElementById("auth-modal"),s=document.getElementById("auth-modal-content");!t||!s||(e?(t.classList.remove("hidden"),requestAnimationFrame(()=>{t.classList.remove("opacity-0","pointer-events-none"),s.classList.remove("scale-95"),s.classList.add("scale-100")})):(t.classList.add("opacity-0","pointer-events-none"),s.classList.remove("scale-100"),s.classList.add("scale-95"),setTimeout(()=>{t.classList.add("hidden")},300)))},highlightActiveLink(){const e=window.location.pathname.split("/").pop()||"index.html",t=new URLSearchParams(window.location.search),s=n=>{if(!n||(n.split("?")[0].split("/").pop()||"index.html")!==e)return!1;if(n.includes("?")){const o=new URLSearchParams(n.split("?")[1]);for(const[i,c]of o.entries())if(t.get(i)!==decodeURIComponent(c))return!1}return!0};document.querySelectorAll(".nav-link").forEach(n=>{s(n.getAttribute("href"))?(n.classList.add("nav-active"),n.classList.remove("text-gray-400","hover:text-white","hover:bg-white/5")):(n.classList.remove("nav-active"),n.classList.add("text-gray-400","hover:text-white","hover:bg-white/5"))}),document.querySelectorAll(".nav-link-mobile").forEach(n=>{const a=n.querySelector("span:first-child");s(n.getAttribute("href"))?(n.classList.add("bg-green-500/10","text-green-400","border-l-4","border-green-500"),n.classList.remove("text-gray-300","hover:bg-gray-800"),a&&a.classList.add("bg-green-500/20","text-green-400")):(n.classList.remove("bg-green-500/10","text-green-400","border-l-4","border-green-500"),n.classList.add("text-gray-300","hover:bg-gray-800"),a&&a.classList.remove("bg-green-500/20","text-green-400"))})}};async function de(e="."){if(oe(),r.init(),!r.placeholder)return;window.showToast=r.showToast,window.triggerLogin=()=>r.toggleAuthModal(!0);const t=m.getCache();let s=!1;t&&(r.renderHTML(m.fixPaths(t,e)),s=!0,P());try{const n=await m.fetchHTML(e);m.setCache(n),s||(r.renderHTML(m.fixPaths(n,e)),P())}catch(n){console.error("Navbar load error:",n)}}function P(){const e=m.getUserCache();r.updateAuthState(e),r.highlightActiveLink(),ie(),re(),ne()}function ie(){const e={menuBtn:document.getElementById("mobile-menu-btn"),closeBtn:document.getElementById("mobile-close-btn"),menu:document.getElementById("mobile-menu"),backdrop:document.getElementById("mobile-menu-backdrop"),mSearch:document.getElementById("mobile-search-input")},t=s=>{!e.menu||!e.backdrop||(s?(e.menu.classList.remove("drawer-closed"),e.menu.classList.add("drawer-open"),e.backdrop.classList.add("backdrop-visible"),document.body.style.overflow="hidden"):(e.menu.classList.add("drawer-closed"),e.menu.classList.remove("drawer-open"),e.backdrop.classList.remove("backdrop-visible"),document.body.style.overflow=""))};e.menuBtn&&(e.menuBtn.onclick=s=>{s.stopPropagation(),t(!0)}),e.closeBtn&&(e.closeBtn.onclick=()=>t(!1)),e.backdrop&&(e.backdrop.onclick=()=>t(!1)),e.mSearch&&(e.mSearch.onclick=s=>s.stopPropagation())}function re(){const e=(s,n)=>{const a=document.getElementById(s);a&&(a.onclick=n)};e("btn-login-google",window.triggerLogin),e("btn-login-google-mobile",window.triggerLogin);const t=async()=>{confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?")&&(m.setUserCache(null),await ee(),window.location.reload())};e("btn-logout",t),e("btn-logout-mobile",t),le(),te(s=>{const n=m.setUserCache(s);r.updateAuthState(n),s&&ae(s.uid)})}function le(){const e={modal:document.getElementById("auth-modal"),close:document.getElementById("btn-close-auth"),google:document.getElementById("btn-auth-google"),form:document.getElementById("email-auth-form"),title:document.getElementById("auth-modal-title"),icon:document.getElementById("auth-icon"),nameField:document.getElementById("field-name-container"),passField:document.getElementById("field-password-container"),social:document.getElementById("social-auth-section"),footer:document.getElementById("auth-footer"),inputs:{name:document.getElementById("auth-name"),email:document.getElementById("auth-email"),pass:document.getElementById("auth-password")},submitBtn:document.getElementById("btn-submit-auth"),switchBtn:document.getElementById("btn-switch-mode"),switchText:document.getElementById("auth-switch-text"),forgotBtn:document.getElementById("btn-forgot-password"),backBtn:document.getElementById("btn-back-login")};let t="login";const s=()=>{!e.inputs.name||!e.inputs.pass||(e.inputs.name.required=t==="register",e.inputs.pass.required=t!=="forgot",t==="login"?(e.title.textContent="‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö",e.icon.className="ri-login-circle-line text-green-500",e.nameField.classList.add("hidden"),e.passField.classList.remove("hidden"),e.social.classList.remove("hidden"),e.footer.classList.remove("hidden"),e.backBtn.classList.add("hidden"),e.submitBtn.innerHTML="‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö",e.switchText.textContent="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ?",e.switchBtn.textContent="‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ü‡∏£‡∏µ"):t==="register"?(e.title.textContent="‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà",e.icon.className="ri-user-add-line text-green-500",e.nameField.classList.remove("hidden"),e.passField.classList.remove("hidden"),e.social.classList.remove("hidden"),e.footer.classList.remove("hidden"),e.backBtn.classList.add("hidden"),e.submitBtn.innerHTML="‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",e.switchText.textContent="‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß?",e.switchBtn.textContent="‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö"):t==="forgot"&&(e.title.textContent="‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô",e.icon.className="ri-lock-unlock-line text-yellow-500",e.nameField.classList.add("hidden"),e.passField.classList.add("hidden"),e.social.classList.add("hidden"),e.footer.classList.add("hidden"),e.backBtn.classList.remove("hidden"),e.submitBtn.innerHTML="‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï"))};e.switchBtn&&(e.switchBtn.onclick=a=>{a.preventDefault(),t=t==="login"?"register":"login",s()}),e.forgotBtn&&(e.forgotBtn.onclick=()=>{t="forgot",s()}),e.backBtn&&(e.backBtn.onclick=()=>{t="login",s()});const n=()=>{r.toggleAuthModal(!1),setTimeout(()=>{t="login",s(),e.form&&e.form.reset()},300)};e.close&&(e.close.onclick=n),e.modal&&(e.modal.onclick=a=>{a.target===e.modal&&n()}),e.google&&(e.google.onclick=async()=>{try{await Q(),n(),r.showToast("‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!","success")}catch(a){r.showToast(M(a.code),"error")}}),e.form&&(e.form.onsubmit=async a=>{a.preventDefault();const o=e.inputs.email.value,i=e.inputs.pass.value,c=e.inputs.name.value,v=e.submitBtn.innerHTML;e.submitBtn.innerHTML='<i class="ri-loader-4-line animate-spin mr-2"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...',e.submitBtn.disabled=!0;try{t==="register"?(await V(o,i,c),r.showToast("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!","success"),n()):t==="login"?(await X(o,i),r.showToast("‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","success"),n()):t==="forgot"&&(await Z(o),r.showToast("‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÅ‡∏•‡πâ‡∏ß","info"),setTimeout(()=>{t="login",s()},2e3))}catch(S){r.showToast(M(S.code),"error")}finally{e.submitBtn.innerHTML=v,e.submitBtn.disabled=!1}})}export{de as l};
